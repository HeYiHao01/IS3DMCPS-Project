<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jeesite.modules.twms.dao.TwmsPltitemDao">
	
	<!-- 查询数据
	<select id="findList" resultType="TwmsPltitem">
		SELECT ${sqlMap.column.toSql()}
		FROM ${sqlMap.table.toSql()}
		<where>
			${sqlMap.where.toSql()}
		</where>
		ORDER BY ${sqlMap.order.toSql()}
	</select> -->
	<select id="getBrandCount" resultType="TwmsPltitem">
		select itemdesc,sum(weight) as weight from twms_pltitem group by itemdesc
	</select>
	<select id="getBoxStatics" resultType="com.jeesite.modules.is3dmcps.entity.BoxStatics">
		select twms_loc.line as line,twms_loc.lie as lie,twms_loc.layer as layer,location_x,location_y,location_z,twms_plt.vpltnum as vpltnum,pltnum,currloc,itemdesc,lotnum,twms_pltitem.enterdate as enterdate
		from is_location,twms_plt,twms_pltitem,twms_loc,
      	(select to_number(concat(concat(to_char(layer),to_char(a_line)),to_char(a_lie))) linelielayer,locnum ,line,lie,layer 
       	from (select  lpad(lie,2,0) a_lie,
                     lpad(line,2,0) a_line,
                     layer,
                     locnum,
                     line,
                     lie 
             from twms_locc loc)) locc
		where locc.linelielayer=is_location.location_id and twms_plt.currloc=twms_loc.locnum and twms_plt.vpltnum=twms_pltitem.vpltnum and twms_plt.vpltnum = #{vpltnum} 
	</select>
</mapper>